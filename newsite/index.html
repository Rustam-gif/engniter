<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Engniter · Ready-to-Use ESL Lesson Plans for Teachers</title>
  <meta name="description" content="Save hours preparing lessons with professionally designed ESL lesson plans, worksheets, and activities for your English classes.">

  <link rel="icon" href="assets/favicon.png" />
  <link rel="stylesheet" href="assets/styles.css" />

  <meta property="og:title" content="Engniter · Ready-to-Use ESL Lesson Plans for Teachers" />
  <meta property="og:description" content="Save hours preparing lessons with professionally designed ESL lesson plans, worksheets, and activities for your English classes." />
  <meta property="og:image" content="assets/logo.png" />
  <meta name="theme-color" content="#f06736" />

  <!-- Schema -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"Organization",
    "name":"Engniter",
    "url":"https://engniter.com",
    "logo":"assets/logo.png"
  }
  </script>

  <!-- Netlify Identity widget -->
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  <!-- GoTrue.js for custom authentication -->
  <script src="https://unpkg.com/@supabase/gotrue-js@2.62.0/dist/umd/gotrue.js"></script>
  <script src="assets/auth.js"></script>
</head>
<body>
<a class="skip" href="#content">Skip to content</a>

<header class="nav" role="banner">
  <div class="container inner">
    <a class="brand" href="index.html" aria-label="Engniter home">
      <img src="assets/logo.png" alt="Engniter logo" />
      <span>ENGNITER</span>
    </a>
    <nav aria-label="Primary">
      <ul>
        <li><a href="lessons.html">Lessons</a></li>
        <li><a href="pricing.html">Pricing</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="account.html" id="account-nav" class="hidden">Account</a></li>
        <li><a class="cta" href="login.html" id="signin-nav">Sign In</a></li>
        <li><a href="#" id="pay-now-nav" class="pay-now-nav hidden">Pay Now — €6.99</a></li>
      </ul>
    </nav>
  </div>
</header>

<main id="content" class="container">
  <section class="hero">
    <div>
      <span class="badge">For ESL Teachers</span>
      <h1>Ready-to-Use ESL Lesson Plans for Teachers</h1>
      <p>Save hours preparing lessons with professionally designed lesson plans, worksheets, and activities for your ESL classes.</p>
      <div class="hero-actions">
        <a href="lessons.html?free=1" class="btn free-cta">Get 5 Free Lesson Plans</a>
      </div>
    </div>
    <div class="art"><img src="assets/logo.png" alt="Engniter mascot"></div>
  </section>

  <section class="grid gap-24">
    <article class="card">
      <h2 class="h3" style="margin-top:0">Why Choose Engniter?</h2>
      <p>Our professionally designed lesson plans save you hours of preparation time while delivering engaging, effective content for your ESL classes.</p>
      <ul class="feature-list">
        <li>Ready-made lesson plans & worksheets</li>
        <li>Saves prep time</li>
        <li>Works for A1–C1 levels</li>
        <li>Includes Business English & exam prep</li>
        <li>Editable PDFs for flexibility</li>
      </ul>
      <div class="trust-signals">
        <div class="testimonial">
          <blockquote>"These lesson plans have saved me hours every week. My students love the engaging content!"</blockquote>
          <cite>— Sarah M., ESL Teacher, Spain</cite>
        </div>
        <div class="stats">
          <div class="stat">
            <span class="stat-number">500+</span>
            <span class="stat-label">Teachers</span>
          </div>
          <div class="stat">
            <span class="stat-number">50+</span>
            <span class="stat-label">Lesson Plans</span>
          </div>
          <div class="stat">
            <span class="stat-number">4.9★</span>
            <span class="stat-label">Rating</span>
          </div>
        </div>
      </div>
    </article>

    <article class="card">
      <h2 class="h3" style="margin-top:0">Get Started Today</h2>
      <p>Join hundreds of ESL teachers who save time and deliver better lessons with our ready-to-use materials.</p>
      <div class="stack">
        <a href="lessons.html" class="btn">Browse Free Lesson Plans</a>
        <a href="pricing.html" class="btn" style="background: var(--muted);">See Teacher Plans</a>
        <button class="btn pay-now pay-now-btn" onclick="handlePayment('lesson')">Pay Now — €6.99</button>
      </div>
    </article>
  </section>
</main>

<footer class="footer" role="contentinfo">
  <div class="container inner">
    <div>© 2025 Engniter • Ready-to-Use ESL Lesson Plans</div>
    <div><a href="account.html">Account</a> · <a href="about.html#faq">FAQ</a></div>
  </div>
</footer>

<script>
document.addEventListener('DOMContentLoaded', function(){
  Auth.init();
});

// Handle payment flow - either proceed directly or handle auth during payment
function handlePayment(type) {
  console.log('handlePayment called with type:', type); // Debug log
  
  // Check if Netlify Identity is available
  if (!window.netlifyIdentity) {
    console.log('Netlify Identity not available, redirecting to login');
    window.location.href = 'login.html';
    return;
  }
  
  // Check if user is logged in
  const user = window.netlifyIdentity.currentUser();
  console.log('Current user:', user ? 'logged in' : 'not logged in');
  
  if (user) {
    // User is logged in, proceed directly to payment
    console.log('User logged in, proceeding to payment');
    proceedToPayment(type);
  } else {
    // User is not logged in, open signup/login popup
    console.log('User not logged in, opening auth popup');
    
    // Store payment type for after auth
    sessionStorage.setItem('pendingPayment', type);
    
    // Open the signup popup
    window.netlifyIdentity.open('signup');
    
    // Listen for successful login/signup
    window.netlifyIdentity.on('login', function() {
      console.log('Login successful, checking for pending payment');
      const pendingPayment = sessionStorage.getItem('pendingPayment');
      if (pendingPayment) {
        sessionStorage.removeItem('pendingPayment');
        console.log('Pending payment found, proceeding to payment');
        proceedToPayment(pendingPayment);
      }
      window.netlifyIdentity.close();
    });
  }
}

// Proceed to actual payment processing
function proceedToPayment(type) {
  console.log('proceedToPayment called with type:', type); // Debug log
  
  // Here you would integrate with your payment processor
  // For now, we'll show a message and redirect to a payment page
  if (type === 'monthly') {
    console.log('Processing monthly subscription payment');
    alert('Redirecting to monthly subscription payment...');
    // window.location.href = 'your-payment-page.html?plan=monthly';
  } else if (type === 'lesson') {
    console.log('Processing lesson purchase payment');
    alert('Redirecting to lesson purchase payment...');
    // window.location.href = 'your-payment-page.html?plan=lesson';
  }
}
</script>
</body>
</html>