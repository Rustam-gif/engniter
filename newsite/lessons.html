<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Lessons ¬∑ Engniter</title>
  <meta name="description" content="Browse our comprehensive collection of English lessons designed for all skill levels.">

  <link rel="icon" href="assets/favicon.png" />
  <link rel="stylesheet" href="assets/styles.css" />

  <meta property="og:title" content="Lessons ¬∑ Engniter" />
  <meta property="og:description" content="Browse our comprehensive collection of English lessons designed for all skill levels." />
  <meta property="og:image" content="assets/logo.png" />
  <meta name="theme-color" content="#f06736" />

  <!-- Schema -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"Organization",
    "name":"Engniter",
    "url":"https://engniter.com",
    "logo":"assets/logo.png"
  }
  </script>

  <!-- Netlify Identity widget -->
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  <!-- GoTrue.js for custom authentication -->
  <script src="https://unpkg.com/@supabase/gotrue-js@2.62.0/dist/umd/gotrue.js"></script>
  <script src="assets/auth.js"></script>
</head>
<body>
<a class="skip" href="#content">Skip to content</a>

<header class="nav" role="banner">
  <div class="container inner">
    <a class="brand" href="index.html" aria-label="Engniter home">
      <img src="assets/logo.png" alt="Engniter logo" />
      <span>ENGNITER</span>
    </a>
    <nav aria-label="Primary">
      <ul>
        <li><a href="lessons.html">Lessons</a></li>
        <li><a href="news.html">News</a></li>
        <li><a href="pricing.html">Pricing</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="account.html" id="account-nav" class="hidden">Account</a></li>
        <li><a class="cta" href="login.html" id="signin-nav">Sign In</a></li>
        <li><a href="#" id="pay-now-nav" class="pay-now-nav hidden">Pay Now ‚Äî ‚Ç¨6.99</a></li>
      </ul>
    </nav>
  </div>
</header>

<main id="content" class="container">
  <section class="grid gap-24">
    <article class="card filters-card" style="grid-column: 1 / -1">
      <div class="filters-bar">

        <div class="group">
          <div class="group-title">Browse by Level</div>
          <div class="level-chips" id="level-chips" role="listbox" aria-label="Filter by CEFR level" aria-multiselectable="false">
            <button class="level-chip active" role="option" aria-selected="true" data-level="ALL">All</button>
            <button class="level-chip" role="option" aria-selected="false" data-level="A1">A1</button>
            <button class="level-chip" role="option" aria-selected="false" data-level="A2">A2</button>
            <button class="level-chip" role="option" aria-selected="false" data-level="B1">B1</button>
            <button class="level-chip" role="option" aria-selected="false" data-level="B2">B2</button>
            <button class="level-chip" role="option" aria-selected="false" data-level="C1">C1</button>
            <button class="level-chip" role="option" aria-selected="false" data-level="C2">C2</button>
          </div>
        </div>
        <div class="group">
          <div class="group-title">Browse by Topic</div>
          <div class="chipbar" id="pdf-topic-chips" aria-label="Filter by topic">
            <button class="chipbtn" data-topic="all"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="9"/></svg>All</button>
            <button class="chipbtn" data-topic="science"><svg viewBox="0 0 24 24"><path d="M9 3v4l-5 9h16l-5-9V3"/></svg>Science</button>
            <button class="chipbtn" data-topic="history"><svg viewBox="0 0 24 24"><path d="M4 7h16M6 7v12m12-12v12M8 19h8"/></svg>History</button>
            <button class="chipbtn" data-topic="culture"><svg viewBox="0 0 24 24"><path d="M4 18h16M6 12h12M8 6h8"/></svg>Culture</button>
            <button class="chipbtn" data-topic="health"><svg viewBox="0 0 24 24"><path d="M12 5v14M5 12h14"/></svg>Health</button>
            <button class="chipbtn" data-topic="technology"><svg viewBox="0 0 24 24"><rect x="4" y="6" width="16" height="12" rx="2"/><path d="M8 20h8"/></svg>Tech</button>
            <button class="chipbtn" data-topic="travel"><svg viewBox="0 0 24 24"><path d="M3 10l7 2 2 7 2-7 7-2-7-2-2-7-2 7-7 2z"/></svg>Travel</button>
            <button class="chipbtn" data-topic="nature"><svg viewBox="0 0 24 24"><path d="M12 2v20M5 12h14"/></svg>Nature</button>
            <button class="chipbtn" data-topic="psychology"><svg viewBox="0 0 24 24"><path d="M12 6a6 6 0 100 12 6 6 0 000-12z"/></svg>Psychology</button>
            <button class="chipbtn" data-topic="law"><svg viewBox="0 0 24 24"><path d="M4 10h16M7 10v8m10-8v8M3 18h18"/></svg>Law</button>
            <button class="chipbtn" data-topic="business"><svg viewBox="0 0 24 24"><rect x="3" y="7" width="18" height="13" rx="2"/><path d="M9 7V5h6v2"/></svg>Business</button>
            <button class="chipbtn" data-topic="legends"><svg viewBox="0 0 24 24"><path d="M12 3l3 7h7l-5.5 4 2 7-6.5-4-6.5 4 2-7L2 10h7z"/></svg>Legends</button>
          </div>
          <div class="select hidden">
            <select id="pdf-filter-topic" aria-label="Filter by topic">
              <option value="all" selected>All topics</option>
            </select>
          </div>
        </div>
        <div class="group">
          <div class="group-title">Access</div>
          <div class="toggle">
            <span>All</span>
            <div class="switch" id="pdf-free-switch"><div class="knob"></div></div>
            <span>Free</span>
          </div>
          <input type="checkbox" id="pdf-filter-free" class="hidden" />
        </div>
      </div>
    </article>
  </section>

  <section class="grid gap-24" id="pdf-library">
    <!-- News Lessons Promotion -->
    <article class="card news-promo" style="grid-column: 1 / -1; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
      <div style="display: flex; align-items: center; gap: 2rem;">
        <div style="flex: 1;">
          <h3 class="h3" style="margin-top: 0; color: white;">üì∞ Current News Lessons</h3>
          <p style="color: rgba(255, 255, 255, 0.9); margin-bottom: 1rem;">Practice English with real-world news articles. Each lesson includes vocabulary, comprehension questions, and discussion topics.</p>
          <a href="news.html" class="btn" style="background: white; color: #667eea; border: none;">Browse News Lessons</a>
        </div>
        <div style="font-size: 3rem; opacity: 0.8;">üì∞</div>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/accidental-discoveries-that-changed-the-world.png" alt="Accidental Discoveries That Changed the World thumbnail">
      <h3 class="h3">Accidental Discoveries That Changed the World</h3>
      <div class="meta-row">
        <span class="pill level">Level: B2</span>
        <span class="pill topic">Business</span>
        <span class="pill grammar">Grammar: Past Simple review</span>
      </div>
      <p class="desc">Famous inventions created by mistake ‚Äî vocab, reading, discussion.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="accidental-discoveries-that-changed-the-world.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('accidental-discoveries-that-changed-the-world')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/bizarre-laws-around-the-world.png" alt="Bizarre Laws Around the World thumbnail">
      <h3 class="h3">Bizarre Laws Around the World</h3>
      <div class="meta-row">
        <span class="pill level">Level: B2</span>
        <span class="pill topic">Law</span>
        <span class="pill grammar">Grammar: Obligation modals</span>
      </div>
      <p class="desc">Fun legal oddities with vocab, reading & grammar review.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="bizarre-laws-around-the-world.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('bizarre-laws-around-the-world')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/caffeine-crash.png" alt="Caffeine Crash thumbnail">
      <h3 class="h3">Caffeine Crash</h3>
      <div class="meta-row">
        <span class="pill level">Level: C1</span>
        <span class="pill topic">Health</span>
        <span class="pill grammar">Grammar: Causatives</span>
      </div>
      <p class="desc">High‚Äëlevel reading on caffeine & crashes with tasks.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="caffeine-crash.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('caffeine-crash')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/conspiracy-theories-people-actually-believed.png" alt="Conspiracy Theories People Actually Believed thumbnail">
      <h3 class="h3">Conspiracy Theories People Actually Believed</h3>
      <div class="meta-row">
        <span class="pill level">Level: B2</span>
        <span class="pill topic">Culture</span>
        <span class="pill grammar">Grammar: Reported speech</span>
      </div>
      <p class="desc">Skeptical reading on famous conspiracies with vocabulary and discussion prompts.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="conspiracy-theories-people-actually-believed.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('conspiracy-theories-people-actually-believed')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/environment-climate-change.png" alt="Environment Climate Change thumbnail">
      <h3 class="h3">Environment: Climate Change</h3>
      <div class="meta-row">
        <span class="pill level">Level: B2</span>
        <span class="pill topic">Nature</span>
        <span class="pill grammar">Grammar: Cause & effect</span>
      </div>
      <p class="desc">Reading and tasks about climate change with language for causes and results.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="environment-climate-change.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('environment-climate-change')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/everyday-items-with-a-dark-history.png" alt="Everyday Items With a Dark History thumbnail">
      <h3 class="h3">Everyday Items With a Dark History</h3>
      <div class="meta-row">
        <span class="pill level">Level: B1</span>
        <span class="pill topic">History</span>
        <span class="pill grammar">Grammar: Passive voice</span>
      </div>
      <p class="desc">Strange backstories behind common objects. Reading, vocabulary and speaking.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="everyday-items-with-a-dark-history.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('everyday-items-with-a-dark-history')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/everyday-things-that-were-invented-by-accident.png" alt="Everyday Things That Were Invented by Accident thumbnail">
      <h3 class="h3">Everyday Things That Were Invented by Accident</h3>
      <div class="meta-row">
        <span class="pill level">Level: B1</span>
        <span class="pill topic">Business</span>
        <span class="pill grammar">Grammar: Past tenses</span>
      </div>
      <p class="desc">How accidental discoveries became products. Past tenses and discussion tasks.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="everyday-things-that-were-invented-by-accident.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('everyday-things-that-were-invented-by-accident')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/future-jobs-that-dont-exist-yet.png" alt="Future Jobs That Don't Exist Yet thumbnail">
      <h3 class="h3">Future Jobs That Don't Exist Yet</h3>
      <div class="meta-row">
        <span class="pill level">Level: B2</span>
        <span class="pill topic">Business</span>
        <span class="pill grammar">Grammar: Future forms</span>
      </div>
      <p class="desc">Speculative reading on emerging careers with future grammar practice.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="future-jobs-that-dont-exist-yet.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('future-jobs-that-dont-exist-yet')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/health-and-fitness.png" alt="Health and Fitness thumbnail">
      <h3 class="h3">Health and Fitness</h3>
      <div class="meta-row">
        <span class="pill level">Level: B1</span>
        <span class="pill topic">Health</span>
        <span class="pill grammar">Grammar: Modals of advice</span>
      </div>
      <p class="desc">Practical tips on exercise and habits with language for giving advice.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="health-and-fitness.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('health-and-fitness')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/health-and-fitness.png" alt="At the Doctors thumbnail">
      <h3 class="h3">At the Doctors</h3>
      <div class="meta-row">
        <span class="pill level">Level: A2-B1</span>
        <span class="pill topic">Health</span>
        <span class="pill grammar">Grammar: Present Simple & Medical vocabulary</span>
      </div>
      <p class="desc">Essential medical vocabulary and phrases for doctor visits. Practice describing symptoms and understanding medical advice.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="at-the-doctors.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('at-the-doctors')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/lost-civilizations-forgotten-technologies.png" alt="Lost Civilizations Forgotten Technologies thumbnail">
      <h3 class="h3">Lost Civilizations & Forgotten Technologies</h3>
      <div class="meta-row">
        <span class="pill level">Level: C1</span>
        <span class="pill topic">History</span>
        <span class="pill grammar">Grammar: Speculation modals</span>
      </div>
      <p class="desc">Investigate ancient mysteries and practice speculation and deduction language.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="lost-civilizations-forgotten-technologies.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('lost-civilizations-forgotten-technologies')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/objects-that-tell-a-story.png" alt="Objects That Tell a Story thumbnail">
      <h3 class="h3">Objects That Tell a Story</h3>
      <div class="meta-row">
        <span class="pill level">Level: B1</span>
        <span class="pill topic">Culture</span>
        <span class="pill grammar">Grammar: Descriptive language</span>
      </div>
      <p class="desc">Tell stories through personal items; adjectives, narrative phrases and speaking.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="objects-that-tell-a-story.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('objects-that-tell-a-story')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/technology.png" alt="Technology thumbnail">
      <h3 class="h3">Technology</h3>
      <div class="meta-row">
        <span class="pill level">Level: B2</span>
        <span class="pill topic">Technology</span>
        <span class="pill grammar">Grammar: Relative clauses</span>
      </div>
      <p class="desc">Modern tech trends with vocabulary and reading; practice defining clauses.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="technology.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('technology')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/the-psychology-of-fear.png" alt="The Psychology of Fear thumbnail">
      <h3 class="h3">The Psychology of Fear</h3>
      <div class="meta-row">
        <span class="pill level">Level: C1</span>
        <span class="pill topic">Psychology</span>
        <span class="pill grammar">Grammar: Abstract nouns</span>
      </div>
      <p class="desc">Explore why we feel fear; reading with vocabulary and speaking activities.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="the-psychology-of-fear.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('the-psychology-of-fear')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/the-science-of-luck.png" alt="The Science of Luck thumbnail">
      <h3 class="h3">The Science of Luck</h3>
      <div class="meta-row">
        <span class="pill level">Level: B2</span>
        <span class="pill topic">Science</span>
        <span class="pill grammar">Grammar: Probability modals</span>
      </div>
      <p class="desc">Is luck real? Read and discuss, practicing language of probability.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="the-science-of-luck.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('the-science-of-luck')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/things-humans-can-not-do.png" alt="Things Humans Can Not Do thumbnail">
      <h3 class="h3">Things Humans Can Not Do</h3>
      <div class="meta-row">
        <span class="pill level">Level: B1</span>
        <span class="pill topic">Science</span>
        <span class="pill grammar">Grammar: Can / can't</span>
      </div>
      <p class="desc">Fun science of human limits with modal verbs and vocabulary tasks.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="things-humans-can-not-do.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('things-humans-can-not-do')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/travel.png" alt="Travel thumbnail">
      <h3 class="h3">Travel</h3>
      <div class="meta-row">
        <span class="pill level">Level: A2</span>
        <span class="pill topic">Travel</span>
        <span class="pill grammar">Grammar: Past Simple</span>
      </div>
      <p class="desc">Tourism vocabulary and travel stories with simple past practice.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="travel.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('travel')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/urban-legends-in-different-countries.png" alt="Urban Legends in Different Countries thumbnail">
      <h3 class="h3">Urban Legends in Different Countries</h3>
      <div class="meta-row">
        <span class="pill level">Level: B2</span>
        <span class="pill topic">Legends</span>
        <span class="pill grammar">Grammar: Narrative tenses</span>
      </div>
      <p class="desc">Folklore from around the world with storytelling tasks and vocabulary.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="urban-legends-in-different-countries.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('urban-legends-in-different-countries')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/what-if-alternate-history.png" alt="What If Alternate History thumbnail">
      <h3 class="h3">What If: Alternate History</h3>
      <div class="meta-row">
        <span class="pill level">Level: C1</span>
        <span class="pill topic">History</span>
        <span class="pill grammar">Grammar: Conditionals</span>
      </div>
      <p class="desc">Speculate on alternate timelines using conditional structures.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="what-if-alternate-history.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('what-if-alternate-history')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/when-animals-outsmart-humans.png" alt="When Animals Outsmart Humans thumbnail">
      <h3 class="h3">When Animals Outsmart Humans</h3>
      <div class="meta-row">
        <span class="pill level">Level: B2</span>
        <span class="pill topic">Nature</span>
        <span class="pill grammar">Grammar: Comparatives</span>
      </div>
      <p class="desc">Surprising animal intelligence stories; vocabulary and comparative forms.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="when-animals-outsmart-humans.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('when-animals-outsmart-humans')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/when-nature-breaks-the-rules.png" alt="When Nature Breaks the Rules thumbnail">
      <h3 class="h3">When Nature Breaks the Rules</h3>
      <div class="meta-row">
        <span class="pill level">Level: B2</span>
        <span class="pill topic">Nature</span>
        <span class="pill grammar">Grammar: Passive voice</span>
      </div>
      <p class="desc">Nature‚Äôs odd exceptions with reading tasks and passive practice.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="when-nature-breaks-the-rules.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('when-nature-breaks-the-rules')">Start Quiz</button>
      </div>
    </article>

    <!-- New Business/Work PDF lessons -->
    <article class="card">
      <img src="pdf_pictures/Brand.png" alt="Brand thumbnail">
      <h3 class="h3">Brand</h3>
      <div class="meta-row">
        <span class="pill level">Level: B1‚ÄìB2</span>
        <span class="pill topic">Business</span>
      </div>
      <div class="actions two">
        <button class="btn premium" data-premium-file="Brand.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('Brand')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/Cultural-Misunderstandings-in-Business(B1-B2).png" alt="Cultural Misunderstandings in Business thumbnail">
      <h3 class="h3">Cultural Misunderstandings in Business</h3>
      <div class="meta-row">
        <span class="pill level">Level: B1‚ÄìB2</span>
        <span class="pill topic">Business</span>
      </div>
      <div class="actions two">
        <button class="btn premium" data-premium-file="Cultural-Misunderstandings-in-Business(B1-B2).pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('Cultural-Misunderstandings-in-Business(B1-B2)')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/Decision-Making-Under-Stress(B1-B2).png" alt="Decision Making Under Stress thumbnail">
      <h3 class="h3">Decision Making Under Stress</h3>
      <div class="meta-row">
        <span class="pill level">Level: B1‚ÄìB2</span>
        <span class="pill topic">Business</span>
      </div>
      <div class="actions two">
        <button class="btn premium" data-premium-file="Decision-Making-Under-Stress(B1-B2).pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('Decision-Making-Under-Stress(B1-B2)')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/Failure-Stories-in-Business(B1-B2).png" alt="Failure Stories in Business thumbnail">
      <h3 class="h3">Failure Stories in Business</h3>
      <div class="meta-row">
        <span class="pill level">Level: B1‚ÄìB2</span>
        <span class="pill topic">Business</span>
      </div>
      <div class="actions two">
        <button class="btn premium" data-premium-file="Failure-Stories-in-Business(B1-B2).pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('Failure-Stories-in-Business(B1-B2)')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/Side-Hustles(B1-B2).png" alt="Side Hustles thumbnail">
      <h3 class="h3">Side Hustles</h3>
      <div class="meta-row">
        <span class="pill level">Level: B1‚ÄìB2</span>
        <span class="pill topic">Business</span>
      </div>
      <div class="actions two">
        <button class="btn premium" data-premium-file="Side-Hustles(B1-B2).pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('Side-Hustles(B1-B2)')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/The-Gig-Economy(B1-B2).png" alt="The Gig Economy thumbnail">
      <h3 class="h3">The Gig Economy</h3>
      <div class="meta-row">
        <span class="pill level">Level: B1‚ÄìB2</span>
        <span class="pill topic">Business</span>
      </div>
      <div class="actions two">
        <button class="btn premium" data-premium-file="The-Gig-Economy(B1-B2).pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('The-Gig-Economy(B1-B2)')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/The-Hidden-Cost-of-Meetings(B1-B2).png" alt="The Hidden Cost of Meetings thumbnail">
      <h3 class="h3">The Hidden Cost of Meetings</h3>
      <div class="meta-row">
        <span class="pill level">Level: B1‚ÄìB2</span>
        <span class="pill topic">Business</span>
      </div>
      <div class="actions two">
        <button class="btn premium" data-premium-file="The-Hidden-Cost-of-Meetings(B1-B2).pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('The-Hidden-Cost-of-Meetings(B1-B2)')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/The-Language-of-Startups(B1-B2).png" alt="The Language of Startups thumbnail">
      <h3 class="h3">The Language of Startups</h3>
      <div class="meta-row">
        <span class="pill level">Level: B1‚ÄìB2</span>
        <span class="pill topic">Business</span>
      </div>
      <div class="actions two">
        <button class="btn premium" data-premium-file="The-Language-of-Startups(B1-B2).pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('The-Language-of-Startups(B1-B2)')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/The-Neuroscience-and-Psychology-of-Brand-Attachment(B1-B2).png" alt="Brand Attachment thumbnail">
      <h3 class="h3">Neuroscience & Psychology of Brand Attachment</h3>
      <div class="meta-row">
        <span class="pill level">Level: B1‚ÄìB2</span>
        <span class="pill topic">Business</span>
      </div>
      <div class="actions two">
        <button class="btn premium" data-premium-file="The-Neuroscience-and-Psychology-of-Brand-Attachment(B1-B2).pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('The-Neuroscience-and-Psychology-of-Brand-Attachment(B1-B2)')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/The-Power-of-Networking(B1-B2).png" alt="Power of Networking thumbnail">
      <h3 class="h3">The Power of Networking</h3>
      <div class="meta-row">
        <span class="pill level">Level: B1‚ÄìB2</span>
        <span class="pill topic">Business</span>
      </div>
      <div class="actions two">
        <button class="btn premium" data-premium-file="The-Power-of-Networking(B1-B2).pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('The-Power-of-Networking(B1-B2)')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/Time-Management-Myths-at-Work(B1-B2).png" alt="Time Management Myths thumbnail">
      <h3 class="h3">Time Management Myths at Work</h3>
      <div class="meta-row">
        <span class="pill level">Level: B1‚ÄìB2</span>
        <span class="pill topic">Business</span>
      </div>
      <div class="actions two">
        <button class="btn premium" data-premium-file="Time-Management-Myths-at-Work(B1-B2).pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('Time-Management-Myths-at-Work(B1-B2)')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/Work-Life-Balance-as-a-Business-Strategy(B1-B2).png" alt="Work‚ÄìLife Balance thumbnail">
      <h3 class="h3">Work‚ÄìLife Balance as a Business Strategy</h3>
      <div class="meta-row">
        <span class="pill level">Level: B1‚ÄìB2</span>
        <span class="pill topic">Business</span>
      </div>
      <div class="actions two">
        <button class="btn premium" data-premium-file="Work-Life-Balance-as-a-Business-Strategy(B1-B2).pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('Work-Life-Balance-as-a-Business-Strategy(B1-B2)')">Start Quiz</button>
      </div>
    </article>
  </section>

  <section class="grid gap-24">
    <article class="card">
      <h2 class="h3" style="margin-top:0">Specialized Topics</h2>
      <p>Explore lessons tailored to specific interests and needs:</p>
      <ul class="feature-list">
        <li>Business English and corporate communication</li>
        <li>Travel and tourism vocabulary</li>
        <li>Academic English for students</li>
        <li>Medical and healthcare terminology</li>
        <li>Technology and IT vocabulary</li>
        <li>Creative writing and storytelling</li>
      </ul>
    </article>

    <article class="card">
      <h2 class="h3" style="margin-top:0">Interactive Features</h2>
      <p>Our lessons include engaging elements to enhance your learning:</p>
      <ul class="feature-list">
        <li>Real-time feedback and corrections</li>
        <li>Audio recordings by native speakers</li>
        <li>Interactive exercises and quizzes</li>
        <li>Progress tracking and analytics</li>
        <li>Mobile-responsive design</li>
        <li>Offline lesson downloads</li>
      </ul>
    </article>
  </section>

  <!-- Pagination Controls -->
  <div class="pagination-container">
    <div class="pagination">
      <button class="pagination-btn prev-btn" onclick="changePage(-1)" disabled>
        ‚Üê Previous
      </button>
      
      <div class="page-numbers">
        <span class="page-info">Page <span id="current-page">1</span> of <span id="total-pages">1</span></span>
      </div>
      
      <button class="pagination-btn next-btn" onclick="changePage(1)">
        Next ‚Üí
      </button>
    </div>
    
    <div class="pagination-options">
      <button class="pagination-btn secondary" onclick="togglePagination()">
        <span id="pagination-toggle-text">Show All</span>
      </button>
    </div>
  </div>

  <!-- Quiz Modal -->
  <div id="quiz-modal" class="quiz-modal" style="display: none;">
    <div class="quiz-modal-content">
      <div class="quiz-modal-header">
        <h2>Interactive Quiz</h2>
        <button class="quiz-modal-close" onclick="closeQuizModal()">&times;</button>
      </div>
      <div id="quiz-root">
        <div class="quiz-loading">
          <p>Loading quiz...</p>
          <div class="loading-spinner"></div>
        </div>
      </div>
    </div>
  </div>
</main>

<footer class="footer" role="contentinfo">
  <div class="container inner">
    <div>¬© 2025 Engniter ‚Ä¢ Ignite your English</div>
    <div><a href="account.html">Account</a> ¬∑ <a href="about.html#faq">FAQ</a></div>
  </div>
</footer>

<script>
// Pagination functionality - Define these functions immediately
function initializePagination() {
  console.log('initializePagination called');
  updatePaginationForVisibleCards();
  showPage(1);
}

function showPage(pageNumber) {
  console.log('showPage called with:', pageNumber);
  const visibleCards = Array.from(document.querySelectorAll('article.card')).filter(card => 
    card.style.display !== 'none'
  );
  const cardsPerPage = 15;
  const totalPages = Math.ceil(visibleCards.length / cardsPerPage);
  
  console.log('Visible cards:', visibleCards.length, 'Total pages:', totalPages);
  
  // Validate page number
  if (pageNumber < 1) pageNumber = 1;
  if (pageNumber > totalPages) pageNumber = totalPages;
  
  // If no pages, show all cards
  if (totalPages === 0) {
    visibleCards.forEach(card => card.style.display = '');
    document.getElementById('current-page').textContent = '1';
    document.getElementById('total-pages').textContent = '1';
    
    // Disable both buttons when no pagination needed
    const prevBtn = document.querySelector('.prev-btn');
    const nextBtn = document.querySelector('.next-btn');
    if (prevBtn) prevBtn.disabled = true;
    if (nextBtn) nextBtn.disabled = true;
    return;
  }
  
  // Calculate start and end indices
  const startIndex = (pageNumber - 1) * cardsPerPage;
  const endIndex = startIndex + cardsPerPage;
  
  // Hide all visible cards first
  visibleCards.forEach(card => card.style.display = 'none');
  
  // Show cards for current page
  visibleCards.forEach((card, index) => {
    if (index >= startIndex && index < endIndex) {
      card.style.display = '';
    }
  });
  
  // Update current page display
  document.getElementById('current-page').textContent = pageNumber;
  document.getElementById('total-pages').textContent = totalPages;
  
  // Update button states
  const prevBtn = document.querySelector('.prev-btn');
  const nextBtn = document.querySelector('.next-btn');
  
  if (prevBtn) prevBtn.disabled = pageNumber === 1;
  if (nextBtn) nextBtn.disabled = pageNumber >= totalPages;
  
  console.log('Page updated. Prev disabled:', pageNumber === 1, 'Next disabled:', pageNumber >= totalPages);
  
  // Store current page in session storage
  sessionStorage.setItem('currentLessonPage', pageNumber);
}

function changePage(direction) {
  console.log('changePage called with direction:', direction);
  
  const currentPage = parseInt(document.getElementById('current-page').textContent);
  const totalPages = parseInt(document.getElementById('total-pages').textContent);
  const newPage = currentPage + direction;
  
  console.log('Current page:', currentPage, 'Total pages:', totalPages, 'New page:', newPage);
  
  if (newPage >= 1 && newPage <= totalPages) {
    console.log('Changing to page:', newPage);
    showPage(newPage);
    
    // Scroll to top of main content
    const mainContent = document.querySelector('main');
    if (mainContent) {
      mainContent.scrollIntoView({ 
        behavior: 'smooth',
        block: 'start'
      });
    }
  } else {
    console.log('Invalid page number:', newPage);
  }
}

// Update pagination when filters change
function updatePaginationForVisibleCards() {
  const visibleCards = Array.from(document.querySelectorAll('article.card')).filter(card => 
    card.style.display !== 'none'
  );
  
  const cardsPerPage = 15;
  const totalPages = Math.ceil(visibleCards.length / cardsPerPage);
  
  // Update total pages display
  document.getElementById('total-pages').textContent = totalPages;
  
  // If current page is beyond total pages, go to last page or page 1
  const currentPage = parseInt(document.getElementById('current-page').textContent);
  if (currentPage > totalPages && totalPages > 0) {
    showPage(totalPages);
  } else if (totalPages === 0) {
    showPage(1);
  } else if (currentPage < 1) {
    showPage(1);
  }
}

// Toggle between paginated and show all views
let paginationEnabled = true;

function togglePagination() {
  const cards = document.querySelectorAll('article.card');
  const toggleText = document.getElementById('pagination-toggle-text');
  const paginationControls = document.querySelector('.pagination');
  
  if (paginationEnabled) {
    // Show all cards
    cards.forEach(card => {
      if (card.style.display !== 'none') {
        card.style.display = '';
      }
    });
    paginationControls.style.display = 'none';
    toggleText.textContent = 'Show Pages';
    paginationEnabled = false;
  } else {
    // Enable pagination
    paginationControls.style.display = 'flex';
    toggleText.textContent = 'Show All';
    paginationEnabled = true;
    showPage(1);
  }
}

// Make functions globally available immediately
window.showPage = showPage;
window.updatePaginationForVisibleCards = updatePaginationForVisibleCards;
window.initializePagination = initializePagination;
window.changePage = changePage;
window.togglePagination = togglePagination;

document.addEventListener('DOMContentLoaded', function(){
  Auth.init();
  // Late-load filter logic after DOM and pills are present
  const s = document.createElement('script');
  s.src = 'assets/app.js';
  document.body.appendChild(s);

  // Remove all Preview buttons and make single-column action rows
  (function(){
    var previews = document.querySelectorAll('#pdf-library .actions.two a[href*="pdfs/"]');
    previews.forEach(function(a){ a.remove(); });
    var rows = document.querySelectorAll('#pdf-library .actions.two');
    rows.forEach(function(r){ r.style.gridTemplateColumns = '1fr'; });
  })();

  // Access control for all PDF Download buttons using data-premium-file
  (function(){
    const PRICING_URL = 'pricing.html';
    const FN_URL = '/.netlify/functions/secure-download';
    const FREE_FILES = new Set([
      'travel.pdf',
      'the-science-of-luck.pdf',
      'objects-that-tell-a-story.pdf',
      'The-Power-of-Networking(B1-B2).pdf',
      'Brand.pdf'
    ]);

    function currentUser(){
      return window.netlifyIdentity && typeof window.netlifyIdentity.currentUser === 'function'
        ? window.netlifyIdentity.currentUser() : null;
    }
    function isPaid(user){
      if (!user) return false;
      const roles = (user.app_metadata && user.app_metadata.roles) || [];
      return roles.includes('paid');
    }
    function isFreeFile(file){ return FREE_FILES.has(file); }
    function setPremium(btn){
      btn.textContent = 'Download PDF';
      btn.classList.remove('download');
      btn.classList.add('premium');
    }
    function setDownload(btn){
  btn.textContent = 'Download PDF';
  btn.classList.remove('premium');
  btn.classList.add('download');
}

    async function handleClick(e){
      const btn = e.currentTarget;
      const file = btn.getAttribute('data-premium-file');
      if (!file) return;

      const user = currentUser();

      // Require login for all downloads (including free ones)
      if (!user){
        if (window.netlifyIdentity) window.netlifyIdentity.open('login');
        return;
      }
      // If not paid and not free, gate to pricing
      if (!isFreeFile(file) && !isPaid(user)){
        window.location.href = PRICING_URL;
        return;
      }

      try{
        const token = await user.jwt();
        const res = await fetch(FN_URL + '?file=' + encodeURIComponent(file), { headers: { Authorization: 'Bearer ' + token } });
        if (!res.ok){ alert('Download failed: ' + res.status); return; }
        const blob = await res.blob();
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url; a.download = file; document.body.appendChild(a); a.click(); a.remove();
        URL.revokeObjectURL(url);
      }catch(err){ alert('Download failed'); }
    }

    function refresh(){
      const user = currentUser();
      const paid = isPaid(user);
      document.querySelectorAll('[data-premium-file]').forEach(btn => {
        if (!btn._bound){ btn.addEventListener('click', handleClick); btn._bound = true; }
        const file = btn.getAttribute('data-premium-file');
        if (isFreeFile(file) || paid) setDownload(btn); else setPremium(btn);
      });
    }

    if (window.netlifyIdentity){
      window.netlifyIdentity.on('init', refresh);
      window.netlifyIdentity.on('login', function(){ refresh(); window.netlifyIdentity.close(); });
      window.netlifyIdentity.on('logout', refresh);
      window.netlifyIdentity.init();
    }
    refresh();
  })();
});

// Function to start quiz from lesson card
function startQuizFromLesson(lessonSlug) {
  // Show quiz modal
  const quizModal = document.getElementById('quiz-modal');
  const quizRoot = document.getElementById('quiz-root');
  
  if (quizModal && quizRoot) {
    // Show modal
    quizModal.style.display = 'block';
    document.body.style.overflow = 'hidden'; // Prevent background scrolling
    
    // Clear existing quiz content
    quizRoot.innerHTML = '<div class="quiz-loading"><p>Loading quiz...</p><div class="loading-spinner"></div></div>';
    
    // Load and display the specific quiz directly
    setTimeout(() => {
      console.log('Starting quiz loading process...');
      console.log('Lesson slug:', lessonSlug);
      console.log('allQuizData available:', !!window.allQuizData);
      console.log('createQuiz available:', !!window.createQuiz);
      
      if (window.allQuizData && window.createQuiz) {
        // Find the quiz data for this lesson - use exact matching first, then fallback
        let quizKey = lessonSlug; // Try exact match first
        
        if (!window.allQuizData[quizKey]) {
          // If exact match fails, try to find a similar key
          quizKey = Object.keys(window.allQuizData).find(key => 
            key.toLowerCase() === lessonSlug.toLowerCase() ||
            key.toLowerCase().replace(/[()]/g, '').replace(/\s+/g, '-') === lessonSlug.toLowerCase().replace(/[()]/g, '').replace(/\s+/g, '-')
          );
        }
        
        console.log('Found quiz key:', quizKey);
        console.log('Quiz data:', quizKey ? window.allQuizData[quizKey] : 'NOT FOUND');
        console.log('Quiz exercises count:', quizKey ? window.allQuizData[quizKey].exercises.length : 'N/A');
        
        if (quizKey && window.allQuizData[quizKey]) {
          // Create and display the specific quiz
          console.log('Creating quiz with key:', quizKey);
          console.log('Quiz title:', window.allQuizData[quizKey].title);
          console.log('Quiz exercises:', window.allQuizData[quizKey].exercises);
          window.createQuiz(quizKey, window.allQuizData[quizKey]);
        } else {
          // Fallback if quiz not found
          console.log('Quiz not found, showing error message');
          quizRoot.innerHTML = '<div class="quiz-error"><p>Quiz not found for this lesson. Please try another lesson.</p></div>';
        }
      } else {
        // Fallback if quiz system not loaded
        console.log('Quiz system not available, showing error message');
        quizRoot.innerHTML = '<div class="quiz-error"><p>Quiz system not available. Please refresh the page.</p></div>';
      }
    }, 300);
  }
}

// Function to close quiz modal
function closeQuizModal() {
  const quizModal = document.getElementById('quiz-modal');
  if (quizModal) {
    quizModal.style.display = 'none';
    document.body.style.overflow = 'auto'; // Restore scrolling
  }
}

// Close modal when clicking outside
document.addEventListener('DOMContentLoaded', function() {
  const quizModal = document.getElementById('quiz-modal');
  if (quizModal) {
    quizModal.addEventListener('click', function(e) {
      if (e.target === quizModal) {
        closeQuizModal();
      }
    });
  }
});

// Load React and Master Quiz System
(function() {
  // Clear any existing quiz content and force fresh start
  const quizRoot = document.getElementById('quiz-root');
  if (quizRoot) {
    quizRoot.innerHTML = '<div class="quiz-loading"><p>Loading comprehensive quiz system...</p><div class="loading-spinner"></div></div>';
    console.log('Quiz root cleared and ready for new content');
  }
  
  // Clear any existing global variables to prevent conflicts
  if (window.Quiz) {
    delete window.Quiz;
    console.log('Cleared old Quiz component');
  }
  
  // Add a simple test to verify script loading
  console.log('Starting quiz system initialization...');
  console.log('Current time:', new Date().toISOString());
  




  



  
  // Load all quiz data first
  const allQuizzesScript = document.createElement('script');
  allQuizzesScript.src = 'assets/all-quizzes.js?v=' + Date.now(); // Force fresh load
  
  // Load master quiz component (vanilla JavaScript version)
  const masterQuizScript = document.createElement('script');
  masterQuizScript.src = 'assets/master-quiz-vanilla.js?v=' + Date.now(); // Force fresh load
  
  // Load quiz data and component directly (no React needed)
  allQuizzesScript.onload = function() {
    console.log('All quizzes data loaded successfully');
    
    // Then load master quiz component
    masterQuizScript.onload = function() {
      console.log('Master quiz component loaded successfully');
      
      // Make createQuiz function globally available
      if (window.createQuiz) {
        console.log('‚úÖ createQuiz function is available globally');
      } else {
        console.error('‚ùå createQuiz function not found');
      }
      
      // Initialize master quiz with a short delay to ensure everything is ready
      setTimeout(function() {
        const quizRoot = document.getElementById('quiz-root');
        console.log('=== QUIZ SYSTEM STATUS CHECK ===');
        console.log('Quiz root element:', quizRoot);
        console.log('All quiz data available:', !!window.allQuizData);
        console.log('All quiz data keys:', window.allQuizData ? Object.keys(window.allQuizData) : 'NOT LOADED');
        console.log('createMasterQuizSelector available:', !!window.createMasterQuizSelector);
        console.log('createQuiz available:', !!window.createQuiz);
        console.log('================================');
        
        if (quizRoot && window.allQuizData && window.createMasterQuizSelector) {
          try {
            console.log('Attempting to initialize master quiz selector...');
            window.createMasterQuizSelector();
            console.log('‚úÖ Master quiz selector initialized successfully');
          } catch (error) {
            console.error('‚ùå Error initializing master quiz:', error);
            showFallbackQuiz();
          }
        } else {
          console.error('‚ùå Required components not found:', {
            quizRoot: !!quizRoot,
            allQuizData: !!window.allQuizData,
            createMasterQuizSelector: !!window.createMasterQuizSelector
          });
          showFallbackQuiz();
        }
      }, 1000); // Short delay to ensure everything is loaded
      
      // Add timeout to show fallback if quiz doesn't load
      setTimeout(function() {
        if (!document.querySelector('.master-quiz-selector') && !document.querySelector('.quiz-container .question')) {
          console.log('Quiz timeout reached, showing fallback');
          showFallbackQuiz();
        }
      }, 15000); // 15 second timeout - give more time for quiz to load
    };
    document.body.appendChild(masterQuizScript);
  };
  
  document.body.appendChild(allQuizzesScript);
  
  allQuizzesScript.onerror = function() {
    console.error('Failed to load All Quizzes script');
    loadFallbackQuiz();
  };
  
  masterQuizScript.onerror = function() {
    console.error('Failed to load Master Quiz script');
    loadFallbackQuiz();
  };
  
  // Fallback quiz if quiz system fails to load
  function showFallbackQuiz() {
    const quizRoot = document.getElementById('quiz-root');
    if (quizRoot) {
      quizRoot.innerHTML = `
        <div class="quiz-container">
          <div class="quiz-header">
            <h2>Quiz System Ready</h2>
            <div class="progress">Click Start Quiz on any lesson to begin</div>
          </div>
        </div>
      `;
    }
  }
  
      function loadFallbackQuiz() {
      console.log('Loading fallback quiz system...');
      
      // Show a simple message that the quiz system is ready
      const quizRoot = document.getElementById('quiz-root');
      if (quizRoot) {
        quizRoot.innerHTML = `
          <div class="quiz-container">
            <div class="quiz-header">
              <h2>Quiz System Ready</h2>
              <div class="progress">Click Start Quiz on any lesson to begin</div>
            </div>
          </div>
        `;
      }
    }
})();

// Restore page from session storage on page load
document.addEventListener('DOMContentLoaded', function() {
  // Wait a bit for all content to load
  setTimeout(() => {
    console.log('Initializing pagination...');
    const savedPage = sessionStorage.getItem('currentLessonPage');
    if (savedPage) {
      showPage(parseInt(savedPage));
    } else {
      initializePagination();
    }
    
    // Ensure pagination is properly set up after filters
    setTimeout(() => {
      updatePaginationForVisibleCards();
      console.log('Pagination updated after filters');
    }, 200);
  }, 100);
});
</script>
</body>
</html>