<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Lessons · Engniter</title>
  <meta name="description" content="Browse our comprehensive collection of English lessons designed for all skill levels.">

  <link rel="icon" href="assets/favicon.png" />
  <link rel="stylesheet" href="assets/styles.css" />

  <meta property="og:title" content="Lessons · Engniter" />
  <meta property="og:description" content="Browse our comprehensive collection of English lessons designed for all skill levels." />
  <meta property="og:image" content="assets/logo.png" />
  <meta name="theme-color" content="#f06736" />

  <!-- Schema -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"Organization",
    "name":"Engniter",
    "url":"https://engniter.com",
    "logo":"assets/logo.png"
  }
  </script>

  <!-- Netlify Identity widget -->
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  <!-- GoTrue.js for custom authentication -->
  <script src="https://unpkg.com/@supabase/gotrue-js@2.62.0/dist/umd/gotrue.js"></script>
  <script src="assets/auth.js"></script>
</head>
<body>
<a class="skip" href="#content">Skip to content</a>

<header class="nav" role="banner">
  <div class="container inner">
    <a class="brand" href="index.html" aria-label="Engniter home">
      <img src="assets/logo.png" alt="Engniter logo" />
      <span>ENGNITER</span>
    </a>
    <nav aria-label="Primary">
      <ul>
        <li><a href="lessons.html">Lessons</a></li>
        <li><a href="news.html">News</a></li>
        <li><a href="pricing.html">Pricing</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="account.html" id="account-nav" class="hidden">Account</a></li>
        <li><a class="cta" href="login.html" id="signin-nav">Sign In</a></li>
        <li><a href="#" id="pay-now-nav" class="pay-now-nav hidden">Pay Now — €6.99</a></li>
      </ul>
    </nav>
  </div>
</header>

<main id="content" class="container">
  <section class="grid gap-24">
    <article class="card filters-card" style="grid-column: 1 / -1">
      <div class="filters-bar">

        <div class="group">
          <div class="group-title">Browse by Level</div>
          <div class="level-chips" id="level-chips" role="listbox" aria-label="Filter by CEFR level" aria-multiselectable="false">
            <button class="level-chip active" role="option" aria-selected="true" data-level="ALL">All</button>
            <button class="level-chip" role="option" aria-selected="false" data-level="A1">A1</button>
            <button class="level-chip" role="option" aria-selected="false" data-level="A2">A2</button>
            <button class="level-chip" role="option" aria-selected="false" data-level="B1">B1</button>
            <button class="level-chip" role="option" aria-selected="false" data-level="B2">B2</button>
            <button class="level-chip" role="option" aria-selected="false" data-level="C1">C1</button>
            <button class="level-chip" role="option" aria-selected="false" data-level="C2">C2</button>
          </div>
        </div>
        <div class="group">
          <div class="group-title">Browse by Topic</div>
          <div class="chipbar" id="pdf-topic-chips" aria-label="Filter by topic">
            <button class="chipbtn" data-topic="all"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="9"/></svg>All</button>
            <button class="chipbtn" data-topic="science"><svg viewBox="0 0 24 24"><path d="M9 3v4l-5 9h16l-5-9V3"/></svg>Science</button>
            <button class="chipbtn" data-topic="history"><svg viewBox="0 0 24 24"><path d="M4 7h16M6 7v12m12-12v12M8 19h8"/></svg>History</button>
            <button class="chipbtn" data-topic="culture"><svg viewBox="0 0 24 24"><path d="M4 18h16M6 12h12M8 6h8"/></svg>Culture</button>
            <button class="chipbtn" data-topic="health"><svg viewBox="0 0 24 24"><path d="M12 5v14M5 12h14"/></svg>Health</button>
            <button class="chipbtn" data-topic="technology"><svg viewBox="0 0 24 24"><rect x="4" y="6" width="16" height="12" rx="2"/><path d="M8 20h8"/></svg>Tech</button>
            <button class="chipbtn" data-topic="travel"><svg viewBox="0 0 24 24"><path d="M3 10l7 2 2 7 2-7 7-2-7-2-2-7-2 7-7 2z"/></svg>Travel</button>
            <button class="chipbtn" data-topic="nature"><svg viewBox="0 0 24 24"><path d="M12 2v20M5 12h14"/></svg>Nature</button>
            <button class="chipbtn" data-topic="psychology"><svg viewBox="0 0 24 24"><path d="M12 6a6 6 0 100 12 6 6 0 000-12z"/></svg>Psychology</button>
            <button class="chipbtn" data-topic="law"><svg viewBox="0 0 24 24"><path d="M4 10h16M7 10v8m10-8v8M3 18h18"/></svg>Law</button>
            <button class="chipbtn" data-topic="business"><svg viewBox="0 0 24 24"><rect x="3" y="7" width="18" height="13" rx="2"/><path d="M9 7V5h6v2"/></svg>Business</button>
            <button class="chipbtn" data-topic="legends"><svg viewBox="0 0 24 24"><path d="M12 3l3 7h7l-5.5 4 2 7-6.5-4-6.5 4 2-7L2 10h7z"/></svg>Legends</button>
          </div>
          <div class="select hidden">
            <select id="pdf-filter-topic" aria-label="Filter by topic">
              <option value="all" selected>All topics</option>
            </select>
          </div>
        </div>
        <div class="group">
          <div class="group-title">Access</div>
          <div class="toggle">
            <span>All</span>
            <div class="switch" id="pdf-free-switch"><div class="knob"></div></div>
            <span>Free</span>
          </div>
          <input type="checkbox" id="pdf-filter-free" class="hidden" />
        </div>
      </div>
    </article>
  </section>

  <section class="grid gap-24" id="pdf-library">
    <!-- News Lessons Promotion -->
    <article class="card news-promo" style="grid-column: 1 / -1; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
      <div style="display: flex; align-items: center; gap: 2rem;">
        <div style="flex: 1;">
          <h3 class="h3" style="margin-top: 0; color: white;">📰 Current News Lessons</h3>
          <p style="color: rgba(255, 255, 255, 0.9); margin-bottom: 1rem;">Practice English with real-world news articles. Each lesson includes vocabulary, comprehension questions, and discussion topics.</p>
          <a href="news.html" class="btn" style="background: white; color: #667eea; border: none;">Browse News Lessons</a>
        </div>
        <div style="font-size: 3rem; opacity: 0.8;">📰</div>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/accidental-discoveries-that-changed-the-world.png" alt="Accidental Discoveries That Changed the World thumbnail">
      <h3 class="h3">Accidental Discoveries That Changed the World</h3>
      <div class="meta-row">
        <span class="pill level">Level: B2</span>
        <span class="pill topic">Business</span>
        <span class="pill grammar">Grammar: Past Simple review</span>
      </div>
      <p class="desc">Famous inventions created by mistake — vocab, reading, discussion.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="accidental-discoveries-that-changed-the-world.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('accidental-discoveries-that-changed-the-world')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/bizarre-laws-around-the-world.png" alt="Bizarre Laws Around the World thumbnail">
      <h3 class="h3">Bizarre Laws Around the World</h3>
      <div class="meta-row">
        <span class="pill level">Level: B2</span>
        <span class="pill topic">Law</span>
        <span class="pill grammar">Grammar: Obligation modals</span>
      </div>
      <p class="desc">Fun legal oddities with vocab, reading & grammar review.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="bizarre-laws-around-the-world.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('bizarre-laws-around-the-world')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/caffeine-crash.png" alt="Caffeine Crash thumbnail">
      <h3 class="h3">Caffeine Crash</h3>
      <div class="meta-row">
        <span class="pill level">Level: C1</span>
        <span class="pill topic">Health</span>
        <span class="pill grammar">Grammar: Causatives</span>
      </div>
      <p class="desc">High‑level reading on caffeine & crashes with tasks.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="caffeine-crash.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('caffeine-crash')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/conspiracy-theories-people-actually-believed.png" alt="Conspiracy Theories People Actually Believed thumbnail">
      <h3 class="h3">Conspiracy Theories People Actually Believed</h3>
      <div class="meta-row">
        <span class="pill level">Level: B2</span>
        <span class="pill topic">Culture</span>
        <span class="pill grammar">Grammar: Reported speech</span>
      </div>
      <p class="desc">Skeptical reading on famous conspiracies with vocabulary and discussion prompts.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="conspiracy-theories-people-actually-believed.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('conspiracy-theories-people-actually-believed')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/environment-climate-change.png" alt="Environment Climate Change thumbnail">
      <h3 class="h3">Environment: Climate Change</h3>
      <div class="meta-row">
        <span class="pill level">Level: B2</span>
        <span class="pill topic">Nature</span>
        <span class="pill grammar">Grammar: Cause & effect</span>
      </div>
      <p class="desc">Reading and tasks about climate change with language for causes and results.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="environment-climate-change.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('environment-climate-change')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/everyday-items-with-a-dark-history.png" alt="Everyday Items With a Dark History thumbnail">
      <h3 class="h3">Everyday Items With a Dark History</h3>
      <div class="meta-row">
        <span class="pill level">Level: B1</span>
        <span class="pill topic">History</span>
        <span class="pill grammar">Grammar: Passive voice</span>
      </div>
      <p class="desc">Strange backstories behind common objects. Reading, vocabulary and speaking.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="everyday-items-with-a-dark-history.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('everyday-items-with-a-dark-history')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/everyday-things-that-were-invented-by-accident.png" alt="Everyday Things That Were Invented by Accident thumbnail">
      <h3 class="h3">Everyday Things That Were Invented by Accident</h3>
      <div class="meta-row">
        <span class="pill level">Level: B1</span>
        <span class="pill topic">Business</span>
        <span class="pill grammar">Grammar: Past tenses</span>
      </div>
      <p class="desc">How accidental discoveries became products. Past tenses and discussion tasks.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="everyday-things-that-were-invented-by-accident.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('everyday-things-that-were-invented-by-accident')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/future-jobs-that-dont-exist-yet.png" alt="Future Jobs That Don't Exist Yet thumbnail">
      <h3 class="h3">Future Jobs That Don't Exist Yet</h3>
      <div class="meta-row">
        <span class="pill level">Level: B2</span>
        <span class="pill topic">Technology</span>
        <span class="pill grammar">Grammar: Future forms</span>
      </div>
      <p class="desc">Speculating about future careers with future tense practice.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="future-jobs-that-dont-exist-yet.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('future-jobs-that-dont-exist-yet')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/health-and-fitness.png" alt="Health and Fitness thumbnail">
      <h3 class="h3">Health and Fitness</h3>
      <div class="meta-row">
        <span class="pill level">Level: A2</span>
        <span class="pill topic">Health</span>
        <span class="pill grammar">Grammar: Present Simple</span>
      </div>
      <p class="desc">Vocabulary and reading about healthy living with present simple practice.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="health-and-fitness.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('health-and-fitness')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/lost-civilizations-forgotten-technologies.png" alt="Lost Civilizations Forgotten Technologies thumbnail">
      <h3 class="h3">Lost Civilizations & Forgotten Technologies</h3>
      <div class="meta-row">
        <span class="pill level">Level: C1</span>
        <span class="pill topic">History</span>
        <span class="pill grammar">Grammar: Complex sentences</span>
      </div>
      <p class="desc">Advanced reading on ancient civilizations with complex sentence structures.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="lost-civilizations-forgotten-technologies.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('lost-civilizations-forgotten-technologies')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/objects-that-tell-a-story.png" alt="Objects That Tell a Story thumbnail">
      <h3 class="h3">Objects That Tell a Story</h3>
      <div class="meta-row">
        <span class="pill level">Level: A2</span>
        <span class="pill topic">Culture</span>
        <span class="pill grammar">Grammar: Descriptive language</span>
      </div>
      <p class="desc">Tell stories through personal items; adjectives, narrative phrases and speaking.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="objects-that-tell-a-story.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('objects-that-tell-a-story')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/the-science-of-luck.png" alt="The Science of Luck thumbnail">
      <h3 class="h3">The Science of Luck</h3>
      <div class="meta-row">
        <span class="pill level">Level: B2</span>
        <span class="pill topic">Science</span>
        <span class="pill grammar">Grammar: Probability modals</span>
      </div>
      <p class="desc">Is luck real? Read and discuss, practicing language of probability.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="the-science-of-luck.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('the-science-of-luck')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/things-humans-can-not-do.png" alt="Things Humans Can Not Do thumbnail">
      <h3 class="h3">Things Humans Can Not Do</h3>
      <div class="meta-row">
        <span class="pill level">Level: B1</span>
        <span class="pill topic">Science</span>
        <span class="pill grammar">Grammar: Can/can't</span>
      </div>
      <p class="desc">Explore human limitations with can/can't grammar practice.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="things-humans-can-not-do.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('things-humans-can-not-do')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/travel.png" alt="Travel thumbnail">
      <h3 class="h3">Travel</h3>
      <div class="meta-row">
        <span class="pill level">Level: A2</span>
        <span class="pill topic">Travel</span>
        <span class="pill grammar">Grammar: Past Simple</span>
      </div>
      <p class="desc">Tourism vocabulary and travel stories with simple past practice.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="travel.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('travel')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/urban-legends-in-different-countries.png" alt="Urban Legends in Different Countries thumbnail">
      <h3 class="h3">Urban Legends in Different Countries</h3>
      <div class="meta-row">
        <span class="pill level">Level: B1</span>
        <span class="pill topic">Culture</span>
        <span class="pill grammar">Grammar: Present Perfect</span>
      </div>
      <p class="desc">Spooky stories from around the world with present perfect practice.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="urban-legends-in-different-countries.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('urban-legends-in-different-countries')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/what-if-alternate-history.png" alt="What If Alternate History thumbnail">
      <h3 class="h3">What If: Alternate History</h3>
      <div class="meta-row">
        <span class="pill level">Level: C1</span>
        <span class="pill topic">History</span>
        <span class="pill grammar">Grammar: Third conditional</span>
      </div>
      <p class="desc">Speculative history with third conditional grammar practice.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="what-if-alternate-history.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('what-if-alternate-history')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/when-animals-outsmart-humans.png" alt="When Animals Outsmart Humans thumbnail">
      <h3 class="h3">When Animals Outsmart Humans</h3>
      <div class="meta-row">
        <span class="pill level">Level: B1</span>
        <span class="pill topic">Nature</span>
        <span class="pill grammar">Grammar: Comparative forms</span>
      </div>
      <p class="desc">Amazing animal intelligence stories with comparative grammar practice.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="when-animals-outsmart-humans.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('when-animals-outsmart-humans')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/when-nature-breaks-the-rules.png" alt="When Nature Breaks the Rules thumbnail">
      <h3 class="h3">When Nature Breaks the Rules</h3>
      <div class="meta-row">
        <span class="pill level">Level: B2</span>
        <span class="pill topic">Nature</span>
        <span class="pill grammar">Grammar: Passive voice</span>
      </div>
      <p class="desc">Nature's odd exceptions with reading tasks and passive practice.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="when-nature-breaks-the-rules.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('when-nature-breaks-the-rules')">Start Quiz</button>
      </div>
    </article>

    <!-- Business Lessons -->
    <article class="card">
      <img src="pdf_pictures/Brand.png" alt="Brand thumbnail">
      <h3 class="h3">Brand</h3>
      <div class="meta-row">
        <span class="pill level">Level: B1-B2</span>
        <span class="pill topic">Business</span>
      </div>
      <p class="desc">Understanding brand identity and marketing concepts.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="Brand.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('Brand')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/Cultural-Misunderstandings-in-Business(B1-B2).png" alt="Cultural Misunderstandings in Business thumbnail">
      <h3 class="h3">Cultural Misunderstandings in Business</h3>
      <div class="meta-row">
        <span class="pill level">Level: B1-B2</span>
        <span class="pill topic">Business</span>
      </div>
      <p class="desc">Cross-cultural communication challenges in business settings.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="Cultural-Misunderstandings-in-Business(B1-B2).pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('Cultural-Misunderstandings-in-Business(B1-B2)')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/Decision-Making-Under-Stress(B1-B2).png" alt="Decision Making Under Stress thumbnail">
      <h3 class="h3">Decision Making Under Stress</h3>
      <div class="meta-row">
        <span class="pill level">Level: B1-B2</span>
        <span class="pill topic">Business</span>
      </div>
      <p class="desc">How to make better decisions in high-pressure situations.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="Decision-Making-Under-Stress(B1-B2).pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('Decision-Making-Under-Stress(B1-B2)')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/Failure-Stories-in-Business(B1-B2).png" alt="Failure Stories in Business thumbnail">
      <h3 class="h3">Failure Stories in Business</h3>
      <div class="meta-row">
        <span class="pill level">Level: B1-B2</span>
        <span class="pill topic">Business</span>
      </div>
      <p class="desc">Learning from business failures and setbacks.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="Failure-Stories-in-Business(B1-B2).pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('Failure-Stories-in-Business(B1-B2)')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/Side-Hustles(B1-B2).png" alt="Side Hustles thumbnail">
      <h3 class="h3">Side Hustles</h3>
      <div class="meta-row">
        <span class="pill level">Level: B1-B2</span>
        <span class="pill topic">Business</span>
      </div>
      <p class="desc">Exploring side business opportunities and entrepreneurship.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="Side-Hustles(B1-B2).pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('Side-Hustles(B1-B2)')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/The-Gig-Economy(B1-B2).png" alt="The Gig Economy thumbnail">
      <h3 class="h3">The Gig Economy</h3>
      <div class="meta-row">
        <span class="pill level">Level: B1-B2</span>
        <span class="pill topic">Business</span>
      </div>
      <p class="desc">Understanding modern flexible work arrangements.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="The-Gig-Economy(B1-B2).pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('The-Gig-Economy(B1-B2)')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/The-Hidden-Cost-of-Meetings(B1-B2).png" alt="The Hidden Cost of Meetings thumbnail">
      <h3 class="h3">The Hidden Cost of Meetings</h3>
      <div class="meta-row">
        <span class="pill level">Level: B1-B2</span>
        <span class="pill topic">Business</span>
      </div>
      <p class="desc">Analyzing the true cost of unproductive meetings.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="The-Hidden-Cost-of-Meetings(B1-B2).pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('The-Hidden-Cost-of-Meetings(B1-B2)')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/The-Language-of-Startups(B1-B2).png" alt="The Language of Startups thumbnail">
      <h3 class="h3">The Language of Startups</h3>
      <div class="meta-row">
        <span class="pill level">Level: B1-B2</span>
        <span class="pill topic">Business</span>
      </div>
      <p class="desc">Startup terminology and entrepreneurial language.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="The-Language-of-Startups(B1-B2).pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('The-Language-of-Startups(B1-B2)')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/The-Neuroscience-and-Psychology-of-Brand-Attachment(B1-B2).png" alt="The Neuroscience and Psychology of Brand Attachment thumbnail">
      <h3 class="h3">The Neuroscience and Psychology of Brand Attachment</h3>
      <div class="meta-row">
        <span class="pill level">Level: B1-B2</span>
        <span class="pill topic">Business</span>
      </div>
      <p class="desc">Understanding how consumers form emotional connections with brands.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="The-Neuroscience-and-Psychology-of-Brand-Attachment(B1-B2).pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('The-Neuroscience-and-Psychology-of-Brand-Attachment(B1-B2)')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/The-Power-of-Networking(B1-B2).png" alt="The Power of Networking thumbnail">
      <h3 class="h3">The Power of Networking</h3>
      <div class="meta-row">
        <span class="pill level">Level: B1-B2</span>
        <span class="pill topic">Business</span>
      </div>
      <p class="desc">Building professional relationships and networking strategies.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="The-Power-of-Networking(B1-B2).pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('The-Power-of-Networking(B1-B2)')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/Time-Management-Myths-at-Work(B1-B2).png" alt="Time Management Myths at Work thumbnail">
      <h3 class="h3">Time Management Myths at Work</h3>
      <div class="meta-row">
        <span class="pill level">Level: B1-B2</span>
        <span class="pill topic">Business</span>
      </div>
      <p class="desc">Debunking common time management misconceptions.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="Time-Management-Myths-at-Work(B1-B2).pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('Time-Management-Myths-at-Work(B1-B2)')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/Work-Life-Balance-as-a-Business-Strategy(B1-B2).png" alt="Work-Life Balance as a Business Strategy thumbnail">
      <h3 class="h3">Work-Life Balance as a Business Strategy</h3>
      <div class="meta-row">
        <span class="pill level">Level: B1-B2</span>
        <span class="pill topic">Business</span>
      </div>
      <p class="desc">How work-life balance improves business performance.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="Work-Life-Balance-as-a-Business-Strategy(B1-B2).pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('Work-Life-Balance-as-a-Business-Strategy(B1-B2)')">Start Quiz</button>
      </div>
    </article>

    <article class="card">
      <img src="pdf_pictures/at-the-doctors.png" alt="At the Doctors thumbnail">
      <h3 class="h3">At the Doctors</h3>
      <div class="meta-row">
        <span class="pill level">Level: A2</span>
        <span class="pill topic">Health</span>
        <span class="pill grammar">Grammar: Present Simple</span>
      </div>
      <p class="desc">Medical vocabulary and doctor visit conversations.</p>
      <div class="actions two">
        <button class="btn premium" data-premium-file="at-the-doctors.pdf">Download PDF</button>
        <button class="btn quiz-btn" onclick="startQuizFromLesson('at-the-doctors')">Start Quiz</button>
      </div>
    </article>
  </section>

  <!-- Pagination Controls -->
  <div class="pagination-container">
    <div class="pagination">
      <button class="pagination-btn prev-btn" onclick="changePage(-1)" disabled>
        ← Previous
      </button>
      
      <div class="page-numbers">
        <span class="page-info">Page <span id="current-page">1</span> of <span id="total-pages">1</span></span>
      </div>
      
      <button class="pagination-btn next-btn" onclick="changePage(1)">
        Next →
      </button>
    </div>
    
    <div class="pagination-options">
      <button class="pagination-btn secondary" onclick="togglePagination()">
        <span id="pagination-toggle-text">Show All</span>
      </button>
    </div>
  </div>

  <!-- Quiz Modal -->
  <div id="quiz-modal" class="quiz-modal" style="display: none;">
    <div class="quiz-modal-content">
      <div class="quiz-modal-header">
        <h2>Interactive Quiz</h2>
        <button class="quiz-modal-close" onclick="closeQuizModal()">&times;</button>
      </div>
      <div id="quiz-root">
        <div class="quiz-loading">
          <p>Loading quiz...</p>
          <div class="loading-spinner"></div>
        </div>
      </div>
    </div>
  </div>
</main>

<footer class="footer" role="contentinfo">
  <div class="container inner">
    <div>© 2025 Engniter • Ignite your English</div>
    <div><a href="account.html">Account</a> · <a href="about.html#faq">FAQ</a></div>
  </div>
</footer>

<script>
// Pagination functionality
function initializePagination() {
  updatePaginationForVisibleCards();
  showPage(1);
}

function showPage(pageNumber) {
  // Only count actual lesson cards, exclude news promo and other non-lesson cards
  const allCards = document.querySelectorAll('article.card:not(.news-promo)');
  const visibleCards = Array.from(allCards).filter(card => 
    card.style.display !== 'none'
  );
  const cardsPerPage = 15;
  const totalPages = Math.ceil(visibleCards.length / cardsPerPage);
  
  console.log('Pagination debug:', {
    totalCards: allCards.length,
    visibleCards: visibleCards.length,
    totalPages: totalPages,
    requestedPage: pageNumber
  });
  
  // Validate page number
  if (pageNumber < 1) pageNumber = 1;
  if (pageNumber > totalPages) pageNumber = totalPages;
  
  // If only one page or no pages, show all cards and disable pagination
  if (totalPages <= 1) {
    visibleCards.forEach(card => card.style.display = '');
    document.getElementById('current-page').textContent = '1';
    document.getElementById('total-pages').textContent = '1';
    
    // Disable navigation buttons
    const prevBtn = document.querySelector('.prev-btn');
    const nextBtn = document.querySelector('.next-btn');
    if (prevBtn) prevBtn.disabled = true;
    if (nextBtn) nextBtn.disabled = true;
    return;
  }
  
  // Calculate which cards to show for this page
  const startIndex = (pageNumber - 1) * cardsPerPage;
  const endIndex = Math.min(startIndex + cardsPerPage, visibleCards.length);
  
  console.log(`Showing page ${pageNumber}: cards ${startIndex + 1} to ${endIndex} of ${visibleCards.length}`);
  
  // Hide ALL visible cards first
  visibleCards.forEach(card => {
    card.style.display = 'none';
  });
  
  // Show only the cards for the current page
  for (let i = startIndex; i < endIndex; i++) {
    if (visibleCards[i]) {
      visibleCards[i].style.display = '';
    }
  }
  
  // Update page display
  document.getElementById('current-page').textContent = pageNumber;
  document.getElementById('total-pages').textContent = totalPages;
  
  // Update button states
  const prevBtn = document.querySelector('.prev-btn');
  const nextBtn = document.querySelector('.next-btn');
  
  if (prevBtn) prevBtn.disabled = (pageNumber <= 1);
  if (nextBtn) nextBtn.disabled = (pageNumber >= totalPages);
  
  // Store current page
  sessionStorage.setItem('currentLessonPage', pageNumber);
}

function changePage(direction) {
  const currentPage = parseInt(document.getElementById('current-page').textContent);
  const totalPages = parseInt(document.getElementById('total-pages').textContent);
  const newPage = currentPage + direction;
  
  if (newPage >= 1 && newPage <= totalPages) {
    showPage(newPage);
    
    // Scroll to top
    const mainContent = document.querySelector('main');
    if (mainContent) {
      mainContent.scrollIntoView({ 
        behavior: 'smooth',
        block: 'start'
      });
    }
  }
}

// Update pagination when filters change
function updatePaginationForVisibleCards() {
  // Only count actual lesson cards, exclude news promo and other non-lesson cards
  const allCards = document.querySelectorAll('article.card:not(.news-promo)');
  const visibleCards = Array.from(allCards).filter(card => 
    card.style.display !== 'none'
  );
  
  const cardsPerPage = 15;
  const totalPages = Math.ceil(visibleCards.length / cardsPerPage);
  
  console.log('Filter update pagination:', {
    totalCards: allCards.length,
    visibleCards: visibleCards.length,
    totalPages: totalPages
  });
  
  // Update total pages display
  document.getElementById('total-pages').textContent = totalPages;
  
  // Determine what to do based on current state
  const currentPage = parseInt(document.getElementById('current-page').textContent);
  
  if (totalPages <= 1) {
    // Single page or no pages
    showPage(1);
  } else if (currentPage > totalPages) {
    // Current page is beyond total pages, go to last page
    showPage(totalPages);
  } else if (currentPage < 1) {
    // Invalid current page, go to first page
    showPage(1);
  } else {
    // Refresh current page to ensure proper display
    showPage(currentPage);
  }
}

// Toggle between paginated and show all views
let paginationEnabled = true;

function togglePagination() {
  // Only toggle actual lesson cards, exclude news promo and other non-lesson cards
  const cards = document.querySelectorAll('article.card:not(.news-promo)');
  const toggleText = document.getElementById('pagination-toggle-text');
  const paginationControls = document.querySelector('.pagination');
  
  if (paginationEnabled) {
    // Show all cards
    cards.forEach(card => {
      if (card.style.display !== 'none') {
        card.style.display = '';
      }
    });
    paginationControls.style.display = 'none';
    toggleText.textContent = 'Show Pages';
    paginationEnabled = false;
  } else {
    // Enable pagination
    paginationControls.style.display = 'flex';
    toggleText.textContent = 'Show All';
    paginationEnabled = true;
    showPage(1);
  }
}

// Function to start quiz from lesson card
function startQuizFromLesson(lessonSlug) {
  // Show quiz modal
  const quizModal = document.getElementById('quiz-modal');
  const quizRoot = document.getElementById('quiz-root');
  
  if (quizModal && quizRoot) {
    // Show modal
    quizModal.style.display = 'block';
    document.body.style.overflow = 'hidden'; // Prevent background scrolling
    
    // Clear existing quiz content
    quizRoot.innerHTML = '<div class="quiz-loading"><p>Loading quiz...</p><div class="loading-spinner"></div></div>';
    
    // Load and display the specific quiz directly
    setTimeout(() => {
      if (window.allQuizData && window.createQuiz) {
        // Find the quiz data for this lesson
        let quizKey = lessonSlug;
        
        if (!window.allQuizData[quizKey]) {
          // If exact match fails, try to find a similar key
          quizKey = Object.keys(window.allQuizData).find(key => 
            key.toLowerCase() === lessonSlug.toLowerCase() ||
            key.toLowerCase().replace(/[()]/g, '').replace(/\s+/g, '-') === lessonSlug.toLowerCase().replace(/[()]/g, '').replace(/\s+/g, '-')
          );
        }
        
        if (quizKey && window.allQuizData[quizKey]) {
          // Create and display the specific quiz
          window.createQuiz(quizKey, window.allQuizData[quizKey]);
        } else {
          // Fallback if quiz not found
          quizRoot.innerHTML = '<div class="quiz-error"><p>Quiz not found for this lesson. Please try another lesson.</p></div>';
        }
      } else {
        // Fallback if quiz system not loaded
        quizRoot.innerHTML = '<div class="quiz-error"><p>Quiz system not available. Please refresh the page.</p></div>';
      }
    }, 300);
  }
}

// Function to close quiz modal
function closeQuizModal() {
  const quizModal = document.getElementById('quiz-modal');
  if (quizModal) {
    quizModal.style.display = 'none';
    document.body.style.overflow = 'auto'; // Restore scrolling
  }
}

// Close modal when clicking outside
document.addEventListener('DOMContentLoaded', function() {
  const quizModal = document.getElementById('quiz-modal');
  if (quizModal) {
    quizModal.addEventListener('click', function(e) {
      if (e.target === quizModal) {
        closeQuizModal();
      }
    });
  }
});

// Restore page from session storage on page load
document.addEventListener('DOMContentLoaded', function() {
  const savedPage = sessionStorage.getItem('currentLessonPage');
  if (savedPage) {
    showPage(parseInt(savedPage));
  }
});

// Initialize pagination when page loads
document.addEventListener('DOMContentLoaded', function() {
  Auth.init();
  
  // Initialize pagination after a short delay to ensure filters are ready
  setTimeout(() => {
    initializePagination();
  }, 200);
  
  // Late-load filter logic after DOM and pills are present
  const s = document.createElement('script');
  s.src = 'assets/app.js';
  document.body.appendChild(s);

  // Remove all Preview buttons and make single-column action rows
  (function(){
    var previews = document.querySelectorAll('#pdf-library .actions.two a[href*="pdfs/"]');
    previews.forEach(function(a){ a.remove(); });
    var rows = document.querySelectorAll('#pdf-library .actions.two');
    rows.forEach(function(r){ r.style.gridTemplateColumns = '1fr'; });
  })();

  // Access control for all PDF Download buttons using data-premium-file
  (function(){
    const PRICING_URL = 'pricing.html';
    const FN_URL = '/.netlify/functions/secure-download';
    const FREE_FILES = new Set([
      'travel.pdf',
      'the-science-of-luck.pdf',
      'objects-that-tell-a-story.pdf',
      'The-Power-of-Networking(B1-B2).pdf',
      'Brand.pdf'
    ]);

    function currentUser(){
      return window.netlifyIdentity && typeof window.netlifyIdentity.currentUser === 'function'
        ? window.netlifyIdentity.currentUser() : null;
    }
    function isPaid(user){
      if (!user) return false;
      const roles = (user.app_metadata && user.app_metadata.roles) || [];
      return roles.includes('paid');
    }
    function isFreeFile(file){ return FREE_FILES.has(file); }
    function setPremium(btn){
      btn.textContent = 'Download PDF';
      btn.classList.remove('download');
      btn.classList.add('premium');
    }
    function setDownload(btn){
      btn.textContent = 'Download PDF';
      btn.classList.remove('premium');
      btn.classList.add('download');
    }

    async function handleClick(e){
      const btn = e.currentTarget;
      const file = btn.getAttribute('data-premium-file');
      if (!file) return;

      const user = currentUser();

      // Require login for all downloads (including free ones)
      if (!user){
        if (window.netlifyIdentity) window.netlifyIdentity.open('login');
        return;
      }
      // If not paid and not free, gate to pricing
      if (!isFreeFile(file) && !isPaid(user)){
        window.location.href = PRICING_URL;
        return;
      }

      try{
        const token = await user.jwt();
        const res = await fetch(FN_URL + '?file=' + encodeURIComponent(file), { headers: { Authorization: 'Bearer ' + token } });
        if (!res.ok){ alert('Download failed: ' + res.status); return; }
        const blob = await res.blob();
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url; a.download = file; document.body.appendChild(a); a.click(); a.remove();
        URL.revokeObjectURL(url);
      }catch(err){ alert('Download failed'); }
    }

    function refresh(){
      const user = currentUser();
      const paid = isPaid(user);
      document.querySelectorAll('[data-premium-file]').forEach(btn => {
        if (!btn._bound){ btn.addEventListener('click', handleClick); btn._bound = true; }
        const file = btn.getAttribute('data-premium-file');
        if (isFreeFile(file) || paid) setDownload(btn); else setPremium(btn);
      });
    }

    if (window.netlifyIdentity){
      window.netlifyIdentity.on('init', refresh);
      window.netlifyIdentity.on('login', function(){ refresh(); window.netlifyIdentity.close(); });
      window.netlifyIdentity.on('logout', refresh);
      window.netlifyIdentity.init();
    }
    refresh();
  })();
});
</script>
</body>
</html>
